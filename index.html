<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>German Learning Resources</title>
        <meta
            name="description"
            content="Interactive German learning resources for B1 level students"
        />
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="assets/styles.css" />
        <style>
            /* Additional styles for index page */
            .folder-content {
                display: none;
            }

            .folder-content.show {
                display: block;
            }

            .folder-toggle {
                transition: all 0.3s ease;
            }

            .folder-toggle:hover {
                transform: translateY(-1px);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
        </style>
    </head>

    <body class="bg-gray-100 min-h-screen flex items-center justify-center">
        <a href="#main-content" class="skip-link">Skip to main content</a>

        <div class="bg-white p-8 rounded-lg shadow-md max-w-2xl w-full">
            <h1
                id="main-content"
                class="text-3xl font-bold mb-6 text-center text-gray-800"
            >
                German Learning Resources
            </h1>

            <div class="space-y-4">
                <!-- B1 Root Level -->
                <div class="folder-section">
                    <button
                        class="folder-toggle w-full text-left bg-gray-200 hover:bg-gray-300 font-semibold py-2 px-4 rounded mb-2 transition duration-300 flex items-center justify-between"
                        data-target="b1-root"
                        aria-expanded="false"
                        aria-controls="b1-root"
                    >
                        <span>üìÅ B1 Level (Main)</span>
                        <span class="toggle-icon">‚ñ∂</span>
                    </button>
                    <div class="folder-content space-y-2 ml-4" id="b1-root">
                        <a href="b1/Bio-Lebensmittel.html" class="b1-link">
                            B1 Level: Lebensmittel (Food)
                        </a>
                        <a href="b1/vors√§tz-1.html" class="b1-link">
                            B1 Level: Vors√§tz-1
                        </a>
                        <a href="b1/7-2a.html" class="b1-link">
                            Wir Geh√∂ren Zussamen
                        </a>
                        <a
                            href="b1/6a-musik-und-emotionen.html"
                            class="b1-link"
                        >
                            Musik und Emotionen
                        </a>
                    </div>
                </div>

                <!-- Wortschatz -->
                <div class="folder-section">
                    <button
                        class="folder-toggle w-full text-left bg-gray-200 hover:bg-gray-300 font-semibold py-2 px-4 rounded mb-2 transition duration-300 flex items-center justify-between"
                        data-target="wortschatz"
                        aria-expanded="false"
                        aria-controls="wortschatz"
                    >
                        <span>üìÅ Wortschatz</span>
                        <span class="toggle-icon">‚ñ∂</span>
                    </button>
                    <div class="folder-content space-y-2 ml-4" id="wortschatz">
                        <a
                            href="b1/Wortschatz/b1.2.html"
                            class="wortschatz-link"
                        >
                            Wortschatz
                        </a>
                        <a
                            href="b1/Wortschatz/kunst.html"
                            class="wortschatz-link"
                        >
                            Kunst
                        </a>
                        <a
                            href="b1/Wortschatz/3-gesellschaft.html"
                            class="wortschatz-link"
                        >
                            B1.2 - 124
                        </a>
                        <a
                            href="b1/Wortschatz/3-gesellschaft-2.html"
                            class="wortschatz-link"
                        >
                            B1.2 - 124 - Extended
                        </a>
                    </div>
                </div>

                <!-- Podcasts -->
                <div class="folder-section">
                    <button
                        class="folder-toggle w-full text-left bg-gray-200 hover:bg-gray-300 font-semibold py-2 px-4 rounded mb-2 transition duration-300 flex items-center justify-between"
                        data-target="podcasts"
                        aria-expanded="false"
                        aria-controls="podcasts"
                    >
                        <span>üìÅ Podcasts</span>
                        <span class="toggle-icon">‚ñ∂</span>
                    </button>
                    <div class="folder-content space-y-2 ml-4" id="podcasts">
                        <a
                            href="b1/podcasts/british-elections.html"
                            class="podcast-link"
                        >
                            UK Elections
                        </a>
                    </div>
                </div>

                <!-- News Articles -->
                <div class="folder-section">
                    <button
                        class="folder-toggle w-full text-left bg-gray-200 hover:bg-gray-300 font-semibold py-2 px-4 rounded mb-2 transition duration-300 flex items-center justify-between"
                        data-target="news-articles"
                        aria-expanded="false"
                        aria-controls="news-articles"
                    >
                        <span>üìÅ News Articles</span>
                        <span class="toggle-icon">‚ñ∂</span>
                    </button>
                    <div
                        class="folder-content space-y-2 ml-4"
                        id="news-articles"
                    >
                        <a
                            href="b1/news-articles/spiegel-1.html"
                            class="news-link"
                        >
                            Spiegel 1
                        </a>
                    </div>
                </div>

                <!-- Valerio -->
                <div class="folder-section">
                    <button
                        class="folder-toggle w-full text-left bg-gray-200 hover:bg-gray-300 font-semibold py-2 px-4 rounded mb-2 transition duration-300 flex items-center justify-between"
                        data-target="valerio"
                        aria-expanded="false"
                        aria-controls="valerio"
                    >
                        <span>üìÅ Valerio</span>
                        <span class="toggle-icon">‚ñ∂</span>
                    </button>
                    <div class="folder-content space-y-2 ml-4" id="valerio">
                        <a href="b1/valerio/9_e2.html" class="valerio-link">
                            Reif f√ºr den Wertstoffhoff
                        </a>
                        <a href="b1/valerio/10.html" class="valerio-link">
                            Die Frau in der Werbung
                        </a>
                        <a
                            href="b1/valerio/11_adolph_knigge.html"
                            class="valerio-link"
                        >
                            Adolph Knigge - √úber den Umgang mit Menschen
                        </a>
                        <a
                            href="b1/valerio/11_andere_sitten.html"
                            class="valerio-link"
                        >
                            Andere L√§nder, andere Sitten
                        </a>
                        <a
                            href="b1/valerio/10_seite_36.html"
                            class="valerio-link"
                        >
                            Das Beste aus meinem Leben
                        </a>
                    </div>
                </div>

                <!-- Rohan -->
                <div class="folder-section">
                    <button
                        class="folder-toggle w-full text-left bg-gray-200 hover:bg-gray-300 font-semibold py-2 px-4 rounded mb-2 transition duration-300 flex items-center justify-between"
                        data-target="rohan"
                        aria-expanded="false"
                        aria-controls="rohan"
                    >
                        <span>üìÅ Rohan</span>
                        <span class="toggle-icon">‚ñ∂</span>
                    </button>
                    <div class="folder-content space-y-2 ml-4" id="rohan">
                        <a
                            href="b1/rohan/handys_in_der_schule.html"
                            class="rohan-link"
                        >
                            Handys in der Schule
                        </a>
                    </div>
                </div>
            </div>

            <!-- Settings Panel -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <div class="flex justify-center space-x-4">
                    <button
                        id="font-size-toggle"
                        class="px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded transition-colors"
                        title="Adjust font size"
                    >
                        Aa
                    </button>
                    <button
                        id="dark-mode-toggle"
                        class="px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded transition-colors"
                        title="Toggle dark mode"
                    >
                        üåô
                    </button>
                    <button
                        id="expand-all"
                        class="px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 text-blue-800 rounded transition-colors"
                        title="Expand all sections"
                    >
                        Expand All
                    </button>
                </div>
            </div>
        </div>

        <script>
            // Modern folder toggle functionality with improved UX
            class FolderManager {
                constructor() {
                    this.initializeToggles();
                    this.loadSavedStates();
                    this.setupUtilityButtons();
                }

                initializeToggles() {
                    const toggles = document.querySelectorAll('.folder-toggle');

                    toggles.forEach(toggle => {
                        toggle.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.toggleFolder(toggle);
                        });

                        toggle.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                this.toggleFolder(toggle);
                            }
                        });
                    });
                }

                toggleFolder(toggle) {
                    const targetId = toggle.getAttribute('data-target');
                    const content = document.getElementById(targetId);
                    const icon = toggle.querySelector('.toggle-icon');

                    if (!content) return;

                    const isHidden = !content.classList.contains('show');

                    if (isHidden) {
                        content.classList.add('show');
                        content.style.display = 'block';
                        icon.textContent = '‚ñº';
                        toggle.setAttribute('aria-expanded', 'true');

                        // Smooth animation
                        content.style.opacity = '0';
                        content.style.transform = 'translateY(-10px)';

                        requestAnimationFrame(() => {
                            content.style.transition = 'all 0.3s ease';
                            content.style.opacity = '1';
                            content.style.transform = 'translateY(0)';
                        });
                    } else {
                        content.classList.remove('show');
                        content.style.transition = 'all 0.3s ease';
                        content.style.opacity = '0';
                        content.style.transform = 'translateY(-10px)';

                        setTimeout(() => {
                            content.style.display = 'none';
                            content.style.transition = '';
                            content.style.opacity = '';
                            content.style.transform = '';
                        }, 300);

                        icon.textContent = '‚ñ∂';
                        toggle.setAttribute('aria-expanded', 'false');
                    }

                    this.saveState(targetId, isHidden);
                }

                expandAll() {
                    const toggles = document.querySelectorAll('.folder-toggle');
                    toggles.forEach(toggle => {
                        const targetId = toggle.getAttribute('data-target');
                        const content = document.getElementById(targetId);
                        const icon = toggle.querySelector('.toggle-icon');

                        if (content && !content.classList.contains('show')) {
                            this.toggleFolder(toggle);
                        }
                    });
                }

                collapseAll() {
                    const toggles = document.querySelectorAll('.folder-toggle');
                    toggles.forEach(toggle => {
                        const targetId = toggle.getAttribute('data-target');
                        const content = document.getElementById(targetId);

                        if (content && content.classList.contains('show')) {
                            this.toggleFolder(toggle);
                        }
                    });
                }

                saveState(folderId, isOpen) {
                    try {
                        const states = JSON.parse(localStorage.getItem('folderStates') || '{}');
                        states[folderId] = isOpen;
                        localStorage.setItem('folderStates', JSON.stringify(states));
                    } catch (e) {
                        console.warn('Could not save folder state:', e);
                    }
                }

                loadSavedStates() {
                    try {
                        const states = JSON.parse(localStorage.getItem('folderStates') || '{}');
                        Object.entries(states).forEach(([folderId, isOpen]) => {
                            if (isOpen) {
                                const toggle = document.querySelector(`[data-target="${folderId}"]`);
                                if (toggle) {
                                    // Small delay to ensure DOM is ready
                                    setTimeout(() => this.toggleFolder(toggle), 50);
                                }
                            }
                        });
                    } catch (e) {
                        console.warn('Could not load folder states:', e);
                    }
                }

                setupUtilityButtons() {
                    // Font size toggle
                    const fontToggle = document.getElementById('font-size-toggle');
                    if (fontToggle) {
                        let fontSize = 'normal';
                        fontToggle.addEventListener('click', () => {
                            const sizes = ['small', 'normal', 'large'];
                            const currentIndex = sizes.indexOf(fontSize);
                            fontSize = sizes[(currentIndex + 1) % sizes.length];

                            document.body.className = document.body.className.replace(/font-size-\w+/g, '');
                            document.body.classList.add(`font-size-${fontSize}`);
                        });
                    }

                    // Dark mode toggle
                    const darkToggle = document.getElementById('dark-mode-toggle');
                    if (darkToggle) {
                        darkToggle.addEventListener('click', () => {
                            document.body.classList.toggle('dark-mode');
                            const isDark = document.body.classList.contains('dark-mode');
                            darkToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';

                            try {
                                localStorage.setItem('darkMode', isDark);
                            } catch (e) {
                                console.warn('Could not save dark mode preference:', e);
                            }
                        });

                        // Load dark mode preference
                        try {
                            const isDark = localStorage.getItem('darkMode') === 'true';
                            if (isDark) {
                                document.body.classList.add('dark-mode');
                                darkToggle.textContent = '‚òÄÔ∏è';
                            }
                        } catch (e) {
                            console.warn('Could not load dark mode preference:', e);
                        }
                    }

                    // Expand all toggle
                    const expandToggle = document.getElementById('expand-all');
                    if (expandToggle) {
                        let allExpanded = false;
                        expandToggle.addEventListener('click', () => {
                            if (allExpanded) {
                                this.collapseAll();
                                expandToggle.textContent = 'Expand All';
                                allExpanded = false;
                            } else {
                                this.expandAll();
                                expandToggle.textContent = 'Collapse All';
                                allExpanded = true;
                            }
                        });
                    }
                }
            }

            // Initialize when DOM is ready
            document.addEventListener('DOMContentLoaded', () => {
                new FolderManager();
            });

            // Backward compatibility function
            function toggleFolder(folderId) {
                const toggle = document.querySelector(`[data-target="${folderId}"]`);
                if (toggle && window.folderManager) {
                    window.folderManager.toggleFolder(toggle);
                }
            }
        </script>
    </body>
</html>
